const DataTypes = require("sequelize").DataTypes;
const _categorias = require("./categorias");
const _clientes = require("./clientes");
const _lojas = require("./lojas");
const _meiomeio = require("./meiomeio");
const _pedidos = require("./pedidos");
const _produtos = require("./produtos");
const _produtospedidos = require("./produtospedidos");
const _relacaoprodutotamanho = require("./relacaoprodutotamanho");
const _tamanhos = require("./tamanhos");
const _taxasentrega = require("./taxasentrega");

function initModels(sequelize) {
  const categorias = _categorias(sequelize, DataTypes);
  const clientes = _clientes(sequelize, DataTypes);
  const lojas = _lojas(sequelize, DataTypes);
  const meiomeio = _meiomeio(sequelize, DataTypes);
  const pedidos = _pedidos(sequelize, DataTypes);
  const produtos = _produtos(sequelize, DataTypes);
  const produtospedidos = _produtospedidos(sequelize, DataTypes);
  const relacaoprodutotamanho = _relacaoprodutotamanho(sequelize, DataTypes);
  const tamanhos = _tamanhos(sequelize, DataTypes);
  const taxasentrega = _taxasentrega(sequelize, DataTypes);

  produtos.belongsToMany(tamanhos, { as: 'idtamanho_tamanhos', through: relacaoprodutotamanho, foreignKey: "idproduto", otherKey: "idtamanho" });
  tamanhos.belongsToMany(produtos, { as: 'idproduto_produtos', through: relacaoprodutotamanho, foreignKey: "idtamanho", otherKey: "idproduto" });
  produtos.belongsTo(categorias, { as: "idcategoria_categoria", foreignKey: "idcategoria"});
  categorias.hasMany(produtos, { as: "produtos", foreignKey: "idcategoria"});
  tamanhos.belongsTo(categorias, { as: "idcategoria_categoria", foreignKey: "idcategoria"});
  categorias.hasMany(tamanhos, { as: "tamanhos", foreignKey: "idcategoria"});
  pedidos.belongsTo(clientes, { as: "cliente_cliente", foreignKey: "cliente"});
  clientes.hasMany(pedidos, { as: "pedidos", foreignKey: "cliente"});
  categorias.belongsTo(lojas, { as: "idloja_loja", foreignKey: "idloja"});
  lojas.hasMany(categorias, { as: "categoria", foreignKey: "idloja"});
  produtospedidos.belongsTo(pedidos, { as: "idpedido_pedido", foreignKey: "idpedido"});
  pedidos.hasMany(produtospedidos, { as: "produtospedidos", foreignKey: "idpedido"});
  produtospedidos.belongsTo(produtos, { as: "idproduto_produto", foreignKey: "idproduto"});
  produtos.hasMany(produtospedidos, { as: "produtospedidos", foreignKey: "idproduto"});
  relacaoprodutotamanho.belongsTo(produtos, { as: "idproduto_produto", foreignKey: "idproduto"});
  produtos.hasMany(relacaoprodutotamanho, { as: "relacaoprodutotamanhos", foreignKey: "idproduto"});
  meiomeio.belongsTo(produtospedidos, { as: "idprodutocarrinho_produtospedido", foreignKey: "idprodutocarrinho"});
  produtospedidos.hasMany(meiomeio, { as: "meiomeios", foreignKey: "idprodutocarrinho"});
  produtospedidos.belongsTo(tamanhos, { as: "idtamanho_tamanho", foreignKey: "idtamanho"});
  tamanhos.hasMany(produtospedidos, { as: "produtospedidos", foreignKey: "idtamanho"});
  relacaoprodutotamanho.belongsTo(tamanhos, { as: "idtamanho_tamanho", foreignKey: "idtamanho"});
  tamanhos.hasMany(relacaoprodutotamanho, { as: "relacaoprodutotamanhos", foreignKey: "idtamanho"});
  pedidos.belongsTo(taxasentrega, { as: "taxaentrega_taxasentrega", foreignKey: "taxaentrega"});
  taxasentrega.hasMany(pedidos, { as: "pedidos", foreignKey: "taxaentrega"});

  return {
    categorias,
    clientes,
    lojas,
    meiomeio,
    pedidos,
    produtos,
    produtospedidos,
    relacaoprodutotamanho,
    tamanhos,
    taxasentrega,
  };
}
module.exports = initModels;
module.exports.initModels = initModels;
module.exports.default = initModels;
